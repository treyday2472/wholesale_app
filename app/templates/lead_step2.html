{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Step 2: Property Details</h2>

<form method="POST" id="LeadStep2CoreForm" novalidate>
  {{ form.hidden_tag() }}

  <div class="mb-3">
    {{ form.why_sell.label(class="form-label") }}
    {{ form.why_sell(class="form-control", rows=2, placeholder="Divorce, relocating, inherited, tired landlord, etc.") }}
    {% for err in form.why_sell.errors %}<div class="text-danger small">{{ err }}</div>{% endfor %}
  </div>

  <div class="mb-3">
    {{ form.timeline.label(class="form-label") }} <span class="text-danger">*</span>
    {{ form.timeline(class="form-select", id="timeline") }}
    {% for err in form.property_type.errors %}<div class="text-danger small">{{ err }}</div>{% endfor %}
  </div>

  <div class="mb-3">
    {{ form.property_type.label(class="form-label") }} <span class="text-danger">*</span>
    {{ form.property_type(class="form-select", id="property_type") }}
    {% for err in form.property_type.errors %}<div class="text-danger small">{{ err }}</div>{% endfor %}
  </div>

  <div class="mb-3">
    {{ form.occupancy_status.label(class="form-label") }} <span class="text-danger">*</span>
    {{ form.occupancy_status(class="form-select", id="occupancy_status") }}
    {% for err in form.occupancy_status.errors %}<div class="text-danger small">{{ err }}</div>{% endfor %}
  </div>

  <!-- ðŸ”¹ Only show when occupancy_status == 'rented' -->
<div class="mb-3" id="rent_amount_block" style="display:none;">
  {{ form.rent_amount.label(class="form-label") }}
  {{ form.rent_amount(class="form-control", placeholder="$ Monthly rent collected from the tenant") }}
  <div class="form-text">Monthly rent collected from the tenant.</div>
</div>

  <div class="mb-3">
    {{ form.listed_with_realtor.label(class="form-label") }} <span class="text-danger">*</span>
    {{ form.listed_with_realtor(class="form-select", id="listed_with_realtor") }}
    {% for err in form.listed_with_realtor.errors %}<div class="text-danger small">{{ err }}</div>{% endfor %}
  </div>

  <div class="mb-3" id="list_price_block" style="display:none;">
    {{ form.list_price.label(class="form-label") }}
    {{ form.list_price(class="form-control", placeholder="$ listing price") }}
  </div>

  <script>
(function(){
  const sel = document.getElementById("listed_with_realtor");
  const block = document.getElementById("list_price_block");
  function toggle(){ block.style.display = sel && sel.value === "yes" ? "" : "none"; }
  sel && sel.addEventListener("change", toggle);
  toggle();
})();

(function(){
  const sel = document.getElementById("occupancy_status");
  const block = document.getElementById("rent_amount_block");
  function toggle(){ block.style.display = (sel && sel.value === "rented") ? "" : "none"; }
  sel && sel.addEventListener("change", toggle);
  toggle();
})();
</script>



</script>
  <div class="mb-3">
    {{ form.condition.label(class="form-label") }} <span class="text-danger">*</span>
    {{ form.condition(class="form-select", id="condition") }}
    {% for err in form.condition.errors %}<div class="text-danger small">{{ err }}</div>{% endfor %}
  </div>

  <button class="btn btn-primary" type="submit">Continue</button>
</form>
{% endblock %}
